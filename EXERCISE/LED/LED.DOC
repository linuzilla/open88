; ==================================================================== ;
;  １∼１                                                              ;
;                                                                      ;
;      實驗： ８２５５Ａ 應用於 ＬＥＤ 的基本實驗                      ;
;                                                                      ;
;      一、實驗目的：                                                  ;
;          應用 8255A 工作模式，控制發光二極體 Ｌ1 ∼ Ｌ24 亮暗狀態    ;
;                                                                      ;
;      二、開關狀態： SW3: -234                                        ;
;                                                                      ;
;      三、實驗條件： 寫一程式控制 LED 使其全亮                        ;
;                                                                      ;
;                     ○○○○○○○○                                 ;
;                     ○○○○○○○○                                 ;
;                     ○○○○○○○○                                 ;
;                                                                      ;
; ==================================================================== ;


Port_Ctrl       EQU     0FF13h          ; 8255A Control Port
Port_A          EQU     0FF10h          ; 8255A Port A
Port_B          EQU     0FF11h          ; 8255A Port B
Port_C          EQU     0FF12h          ; 8255A Port C

                .MODEL  SMALL
                .CODE
                mov     dx, Port_Ctrl
                mov     al, 80h
                out     dx, al          ; 設定 8255 工作模式

                mov     al, 11111111b   ; 分別送 (11111111)b 的資料
                mov     dx, Port_A      ; 到 Port_A, Port_B 及 Port_C
                out     dx, al          ; 使接到這些 Port 的 LED 亮起來
                mov     dx, Port_B
                out     dx, al
                mov     dx, Port_C
                out     dx, al

                mov     ah, 4Ch
                int     21h             ; 返回 DOS
                .STACK
                END

; ==================================================================== ;
;  習作：試撰寫一程式使 LED 的亮暗狀態成你座號的尾數：            　   ;
;                                                                      ;
;  參考圖例：                                                          ;
;                                                                      ;
;          ○●○   ○●○   ○●○   ●●●   ○○●                  ;
;          ●○●   ●●○   ●○●   ○○●   ●○●                  ;
;          ●○●   ○●○   ○○●   ○●○   ●○●                  ;
;          ●○●   ○●○   ○○●   ●●○   ●○●                  ;
;          ●○●   ○●○   ○●○   ○○●   ●●●                  ;
;          ●○●   ○●○   ●○○   ○○●   ○○●                  ;
;          ●○●   ○●○   ●○○   ●○●   ○○●                  ;
;          ○●○   ●●●   ●●●   ●●○   ○○●                  ;
;                                                                      ;
;          ●●●   ○●○   ●●●   ○●○   ○●○                  ;
;          ●○○   ●○●   ●○●   ●○●   ●○●                  ;
;          ●○○   ●○○   ○○●   ●○●   ●○●                  ;
;          ●●●   ●●○   ○○●   ○●○   ●○●                  ;
;          ●○●   ●○●   ○●○   ●○●   ○●●                  ;
;          ○○●   ●○●   ○●○   ●○●   ○○●                  ;
;          ●○●   ●○●   ○●○   ●○●   ●○●                  ;
;          ○●○   ○●○   ○●○   ○●○   ○●○                  ;
;                                                                      ;
; ==================================================================== ;


; ==================================================================== ;
;  討論：如何逐一印出兩位數的學號                                 　   ;
;  方法：                                                              ;
;    一、先送十位數字的字型，再送個位數字的字型。                      ;
;    二、在送出每個字型之後要稍作時間的延遲，以避免畫面一閃而過。      ;
;                                                                      ;
;  如何做時間的延遲？                                                  ;
;    法一、讓電腦做一些無意義的迴路。                                  ;
;          優點：較簡單易解                                            ;
;    法二、用計時器來計算。                                            ;
;          優點：較精確，不受電腦速度的影響。                          ;
;                                                                      ;
;  空迴圈延遲法：                                                      ;
;    在 80x86 系統裡，CX 暫存器稱為計數暫存器，因此以 CX 來當空迴圈    ;
;    的計數器最方便。如：                                              ;
;                                                                      ;
;                    MOV    CX, 1000   ; 讓 CX 暫存器的內容為 1000     ;
;         DELAY01:   LOOP   DELAY01    ; 每次將 CX 的值減 1，若減後    ;
;                                      ; CX 不為 0 則跳回 DELAY01      ;
;                                                                      ;
;    由於 CX 是 16 位元的暫存器，因此最大的計數值是 0FFFFh，即十進     ;
;    位的 65535。若延遲的時間仍不夠長，則在其外還要再套上一層迴圈      ;
;    形成類似高階語言的巢狀迴圈。如：                                  ;
;                                                                      ;
;                                                                      ;
;                    MOV    DX, 30     ; 讓 DX 暫存器的內容為 30       ;
;         DELAY00:   MOV    CX, 0FFFFh                                 ;
;         DELAY01:   LOOP   DELAY01                                    ;
;                    DEC    DX         ; 將 DX 暫存器的內容減 1        ;
;                    JNZ    DELAY00    ; 若上一敘述沒有使 Z 旗號       ;
;                                        ( 零位旗號 ) 設定時，跳       ;
;                                        至 DELAY00                    ;
;                                                                      ;
;                                                                      ;
;                                                                      ;
; ==================================================================== ;
